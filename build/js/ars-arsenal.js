!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react/addons")):"function"==typeof define&&define.amd?define(["react","react/addons"],t):"object"==typeof exports?exports.ArsArsenal=t(require("react"),require("react/addons")):e.ArsArsenal=t(e.react,e["react/addons"])}(this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(17),n(26);var r=n(1),o=n(7);e.exports={component:o,render:function(e,t){r.render(r.createElement(o,r.__spread({},t)),e)}}},function(t){t.exports=e},function(e){e.exports=t},function(e,t,n){var r=n(2),o=(r.PropTypes,r.addons.classSet),i=r.createClass({displayName:"Button",getDefaultProps:function(){return{raised:!1}},getClassName:function(e){var t=o({"ars-button":!0,"ars-button-raised":this.props.raised});return o(e,t)},render:function(){var e=this.props,t=e.className,n=e.children,o=function(e,t){var n={},r=Object.prototype.hasOwnProperty;if(null==e)throw new TypeError;for(var o in e)r.call(e,o)&&!r.call(t,o)&&(n[o]=e[o]);return n}(e,{className:1,children:1});return r.createElement("button",r.__spread({className:this.getClassName(t)},o),n)}});e.exports=i},function(e,t,n){var r=n(2),o=r.addons.classSet,i=r.createClass({displayName:"Image",getInitialState:function(){return{isLoaded:!1}},getClassName:function(e){var t=o("ars-img",e),n=o({"ars-img-loaded":this.state.isLoaded});return o(t,n)},render:function(){var e=this.props,t=e.className,n=(e.onLoad,function(e,t){var n={},r=Object.prototype.hasOwnProperty;if(null==e)throw new TypeError;for(var o in e)r.call(e,o)&&!r.call(t,o)&&(n[o]=e[o]);return n}(e,{className:1,onLoad:1}));return r.createElement("img",r.__spread({className:this.getClassName(t),onLoad:this._onLoad},n))},_onLoad:function(){this.setState({isLoaded:!0}),this.props.onLoad&&this.props.onLoad()}});e.exports=i},function(e,t,n){var r=n(19),o={fetch:function(e,t,n){var o=r({url:e,json:!0},function(e,r,o){e?n(e):t(o)});return o},filter:function(e,t){var n=new RegExp(t,"i");return t?e.filter(function(e){return e.caption.match(n)}):e},find:function(e,t){return void 0==t?null:e.find(function(e){return e.id.toString()===t.toString()})},datalist:function(e){return e.map(function(e){return e.caption})}};e.exports=o},function(){!function(){if(!Array.prototype.find){var e=function(e){var t=Object(this),n=t.length<0?0:t.length>>>0;if(0===n)return void 0;if("function"!=typeof e||"[object Function]"!==Object.prototype.toString.call(e))throw new TypeError("Array#find: predicate must be a function");for(var r,o=arguments[1],i=0;n>i;i++)if(r=t[i],e.call(o,r,i,t))return r;return void 0};if(Object.defineProperty)try{Object.defineProperty(Array.prototype,"find",{value:e,configurable:!0,enumerable:!1,writable:!0})}catch(t){}Array.prototype.find||(Array.prototype.find=e)}}(this)},function(e,t,n){var r=n(10),o=n(5),i=n(1),s=n(12),a=n(15),c=i.PropTypes,u=i.createClass({displayName:"Ars",mixins:[a],propTypes:{url:c.string.isRequired,onChange:c.func},getDefaultProps:function(){return{onChange:function(){},picked:null}},getInitialState:function(){return{dialogOpen:!1,picked:this.props.picked,search:""}},getPicker:function(){var e=this.state,t=e.error,n=e.items,s=e.search,a=e.picked,c=o.filter(n,s);return i.createElement(r,{error:t,items:c,key:"dialog",onSearch:this._onSearchChange,onChange:this._onGalleryPicked,onExit:this._onExit,picked:a})},render:function(){var e=this.state,t=e.dialogOpen,n=e.items,r=e.picked,a=(e.search,o.find(n,r));return i.createElement("div",{className:"ars"},i.createElement(s,{onClick:this._onOpenClick,photo:a}),t&&this.getPicker())},_onOpenClick:function(){this.setState({dialogOpen:!0,search:null})},_onSearchChange:function(e){this.setState({search:e})},_onGalleryPicked:function(e){this.setState({picked:e},function(){return this.props.onChange(this.state.picked)}.bind(this))},_onExit:function(){this.setState({dialogOpen:!1,search:null})}});e.exports=u},function(e,t,n){var r=n(4),o=n(2),i=o.PropTypes,s=o.addons.classSet,a=o.createClass({displayName:"Figure",propTypes:{record:i.object.isRequired,onClick:i.func.isRequired,picked:i.bool},render:function(){var e=this.props,t=e.record,n=e.picked,i=s({"ars-fig":!0,"ars-fig-picked":n});return o.createElement("button",{className:i,onClick:this._onClick},o.createElement(r,{className:"ars-fig-img",src:t.url}),o.createElement("span",{className:"ars-fig-caption"},t.caption))},_onClick:function(e){e.preventDefault(),this.props.onClick(this.props.record.id)}});e.exports=a},function(e,t,n){var r=n(2),o=r.addons.CSSTransitionGroup,i=n(8),s=r.PropTypes,a=r.createClass({displayName:"Gallery",propTypes:{items:s.array,onPicked:s.func.isRequired},getDefaultProps:function(){return{items:[],picked:!1}},getItem:function(e){var t=e.id===this.props.picked;return r.createElement(i,{key:"photo_"+e.id,picked:t,record:e,onClick:this.props.onPicked})},render:function(){return r.createElement(o,{component:"div",className:"ars-gallery",transitionName:"ars-fig",onKeyDown:this.props.onKeyDown},this.props.items.map(this.getItem))}});e.exports=a},function(e,t,n){var r=n(3),o=n(13),i=n(9),s=n(1),a=n(11),c=s.PropTypes,u=s.createClass({displayName:"Picker",propTypes:{onChange:c.func.isRequired,onExit:c.func.isRequired,onSearch:c.func.isRequired},getDefaultProps:function(){return{items:[],picked:!1}},getInitialState:function(){return{picked:this.props.picked}},confirm:function(){this.props.onChange(this.state.picked),this.props.onExit()},cancel:function(){this.props.onExit()},getError:function(){var e=this.props.error;return e?s.createElement("p",{className:"ars-error"},e):null},render:function(){{var e=this.props,t=(e.error,e.items),n=e.onSearch;e.onChange,e.search}return s.createElement(o,{onExit:this.props.onExit},s.createElement("header",{className:"ars-dialog-header"},s.createElement("h1",{className:"ars-dialog-title"},"Please select a photo"),s.createElement(a,{key:"search",onChange:n})),this.getError(),s.createElement(i,{items:t,picked:this.state.picked,onPicked:this._onPicked,onKeyDown:this._onKeyDown}),s.createElement("footer",{className:"ars-dialog-footer"},s.createElement(r,{onClick:this.props.onExit},"Cancel"),s.createElement(r,{onClick:this._onConfirm,raised:!0},"Okay")))},_onPicked:function(e){this.setState({picked:e})},_onCancel:function(e){e.preventDefault(),this.cancel()},_onConfirm:function(e){e.preventDefault(),this.confirm()},_onKeyDown:function(e){"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&this.confirm()}});e.exports=u},function(e,t,n){var r=n(1),o=r.PropTypes,i=n(16),s=2,a=r.createClass({displayName:"Search",mixins:[i],propTypes:{onChange:o.func.isRequired},render:function(){var e="ars_search_"+this.state.id;return r.createElement("div",{className:"ars-search"},r.createElement("label",{className:"ars-search-label",htmlFor:e},"Search"),r.createElement("input",{id:e,ref:"input",type:"search",className:"ars-search-input",onChange:this._onChange,placeholder:"Search"}))},_onChange:function(){var e=this.refs.input.getDOMNode().value||"",t=e.length>=s?e:"";this.props.onChange(t)}});e.exports=a},function(e,t,n){var r=n(3),o=n(4),i=n(1),s="Select an image",a="Choose another image",c=i.createClass({displayName:"Selection",getPhoto:function(){var e=this.props.photo,t=e.caption,n=e.url;return i.createElement(o,{className:"ars-selection-photo",alt:t,src:n})},render:function(){var e=this.props.photo;return i.createElement(r,{className:"ars-selection",onClick:this._onClick},e&&this.getPhoto(),i.createElement("span",{className:"ars-selection-caption"},e?a:s))},_onClick:function(e){e.preventDefault(),this.props.onClick(e)}});e.exports=c},function(e,t,n){var r=n(14),o=n(1),i=o.PropTypes,s=o.createClass({displayName:"Dialog",mixins:[r],propTypes:{onExit:i.func.isRequired},render:function(){return o.createElement("div",{className:"ars-dialog",tabIndex:"0",role:"dialog",onKeyUp:this._onKeyUp},o.createElement("div",{className:"ars-dialog-blackout","aria-hidden":!0,onClick:this.props.onExit}),o.createElement("section",{className:"ars-dialog-inner"},this.props.children))},_onKeyUp:function(e){"Escape"===e.key&&this.props.onExit()}});e.exports=s},function(e){e.exports={_pushFocus:function(){this.setState({previousFocus:document.activeElement}),this.getDOMNode().focus()},_popFocus:function(){this.state.previousFocus&&(this.state.previousFocus.focus(),this._clearTrap())},_trapFocus:function(){this._focusTimer=setTimeout(function(){return this.getDOMNode().focus()}.bind(this),10)},_clearTrap:function(){clearTimeout(this._focusTimer)},componentDidMount:function(){var e=this.getDOMNode();e.addEventListener("focusin",this._clearTrap),e.addEventListener("focusout",this._trapFocus),this._pushFocus()},componentWillUnmount:function(){var e=this.getDOMNode();this._popFocus(),e.removeEventListener("focusin",this._clearTrap),e.removeEventListener("focusout",this._trapFocus)}}},function(e,t,n){var r=n(5),o=n(1).PropTypes;e.exports={propTypes:{onFetch:o.func},getDefaultProps:function(){return{onFetch:function(e){return e}}},getInitialState:function(){return{items:[],error:!1}},componentWillMount:function(){r.fetch(this.props.url,this.responseDidSucceed,this.responseDidFail)},responseDidSucceed:function(e){var t=this.props.onFetch(e);this.setState({items:t,error:!1})},responseDidFail:function(e){this.setState({error:e})}}},function(e){var t=0;e.exports={getInitialState:function(){return{id:"c"+t++}}}},function(e,t,n){Object.assign||(Object.assign=n(18)),n(6)},function(e){"use strict";function t(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=Object.assign||function(e){for(var n,r,o=t(e),i=1;i<arguments.length;i++){n=arguments[i],r=Object.keys(Object(n));for(var s=0;s<r.length;s++)o[r[s]]=n[r[s]]}return o}},function(e,t,n){function r(e,t){function n(){4===m.readyState&&k()}function r(){var e=null;if(m.response?e=m.response:"text"!==m.responseType&&m.responseType||(e=m.responseText||m.responseXML),b)try{e=JSON.parse(e)}catch(t){}return e}function i(){return 1223===m.status?204:m.status}function l(e){var t=null;if(0===e||e>=400&&600>e){var n=("string"==typeof E?E:!1)||c[String(e).charAt(0)];t=new Error(n),t.statusCode=e}return t}function f(){var e=i(),n=l(e),o={body:r(),statusCode:e,statusText:m.statusText,raw:m};o.headers=m.getAllResponseHeaders?a(m.getAllResponseHeaders()):{},t(n,o,o.body)}function d(){var e=i(),n=l(e);m.status=m.statusCode=e,m.body=r(),m.headers=a(m.getAllResponseHeaders()),t(n,m,m.body)}function h(e){t(e,m)}"string"==typeof e&&(e={uri:e}),e=e||{},t=s(t);var m=e.xhr||null;m||(m=e.cors||e.useXDR?new p:new u);var y,g=m.url=e.uri||e.url,v=m.method=e.method||"GET",E=e.body||e.data,x=m.headers=e.headers||{},C=!!e.sync,b=!1,k=e.response?f:d;if("json"in e&&(b=!0,x.Accept="application/json","GET"!==v&&"HEAD"!==v&&(x["Content-Type"]="application/json",E=JSON.stringify(e.json))),m.onreadystatechange=n,m.onload=k,m.onerror=h,m.onprogress=function(){},m.ontimeout=o,m.open(v,g,!C),(e.withCredentials||e.cors&&e.withCredentials!==!1)&&(m.withCredentials=!0),C||(m.timeout="timeout"in e?e.timeout:5e3),m.setRequestHeader)for(y in x)x.hasOwnProperty(y)&&m.setRequestHeader(y,x[y]);else if(e.headers)throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(m.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(m),m.send(E),m}function o(){}var i=n(20),s=n(21),a=n(25),c={0:"Internal XMLHttpRequest Error",4:"4xx Client Error",5:"5xx Server Error"},u=i.XMLHttpRequest||o,p="withCredentials"in new u?u:i.XDomainRequest;e.exports=r},function(e,t){(function(t){e.exports="undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{}}).call(t,function(){return this}())},function(e){function t(e){var t=!1;return function(){return t?void 0:(t=!0,e.apply(this,arguments))}}e.exports=t,t.proto=t(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return t(this)},configurable:!0})})},function(e,t,n){function r(e,t,n){if(!a(t))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===c.call(e)?o(e,t,n):"string"==typeof e?i(e,t,n):s(e,t,n)}function o(e,t,n){for(var r=0,o=e.length;o>r;r++)u.call(e,r)&&t.call(n,e[r],r,e)}function i(e,t,n){for(var r=0,o=e.length;o>r;r++)t.call(n,e.charAt(r),r,e)}function s(e,t,n){for(var r in e)u.call(e,r)&&t.call(n,e[r],r,e)}var a=n(23);e.exports=r;var c=Object.prototype.toString,u=Object.prototype.hasOwnProperty},function(e){function t(e){var t=n.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}e.exports=t;var n=Object.prototype.toString},function(e,t){function n(e){return e.replace(/^\s*|\s*$/g,"")}t=e.exports=n,t.left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t,n){var r=n(24),o=n(22),i=function(e){return"[object Array]"===Object.prototype.toString.call(e)};e.exports=function(e){if(!e)return{};var t={};return o(r(e).split("\n"),function(e){var n=e.indexOf(":"),o=r(e.slice(0,n)).toLowerCase(),s=r(e.slice(n+1));"undefined"==typeof t[o]?t[o]=s:i(t[o])?t[o].push(s):t[o]=[t[o],s]}),t}},function(){}])});
//# sourceMappingURL=ars-arsenal.js.map